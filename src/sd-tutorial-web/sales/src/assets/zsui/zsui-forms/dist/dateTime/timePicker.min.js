!function(t){"use strict";t.timePicker={_ONE_DAY:86400,_defaults:{lang:{am:"am",pm:"pm",AM:"AM",PM:"PM",decimal:".",mins:"mins",hr:"hr",hrs:"hrs"},step:30,format24:!1,value:"",min:"12:00am",max:"11.59pm"},_format24:null,_max:null,_min:null,_step:null,_value:null,_lang:{am:"am",pm:"pm",AM:"AM",PM:"PM",decimal:".",mins:"mins",hr:"hr",hrs:"hrs"},attachToBody:!1,observedAttributes:["value","min","max","step"],fieldElement:null,menuContainer:null,onChange:null,properties:{step:{set:function(t){(isNaN(t)||""===(""+t).trim())&&(t=this._defaults.step),t>this._ONE_DAY/60&&(t=this._defaults.step),this._checkAndUpdateAttrByProp("step",t),this._step=t},get:function(t){return this._step}},format24:{set:function(t){"string"!=typeof t&&"boolean"!=typeof t&&(t=this._defaults.format24),this._checkAndUpdateAttrByProp("format24",t),this._format24=t},get:function(t){return this._format24}},max:{set:function(t){t=!isNaN(t)||"string"!=typeof t||""!=t&&null==this._time2int(t)?isNaN(t)?this._defaults.max:this._int2time(t):this._getFormattedTime(t),this._checkAndUpdateAttrByProp("max",t),this._max=t},get:function(t){return this._max}},min:{set:function(t){t=!isNaN(t)||"string"!=typeof t||""!=t&&null==this._time2int(t)?isNaN(t)?this._defaults.min:this._int2time(t):this._getFormattedTime(t),this._checkAndUpdateAttrByProp("min",t),this._min=t},get:function(t){return this._min}},value:{set:function(t){var e=this.value;t="string"==typeof t&&""!=t&&this.validate(t)?this._getFormattedTime(t):""==t?"":""!=this.value&&null!=this.value?this.value:this._defaults.value,this._value=t,"function"==typeof this.onChange&&t!=e&&this.onChange(),this.fieldElement&&(this.fieldElement.value=t),this._checkAndUpdateAttrByProp("value",t)},get:function(t){return this._value}},lang:{set:function(t){"object"!=typeof t&&(t=this._defaults.lang),this._lang=t},get:function(t){return this._lang}}},_setDefaults:function(){for(var t in this.properties){var e=this._defaults[t];this.properties.hasOwnProperty(t)&&(null===this[t]&&this[t]!=e&&(this[t]=e))}return this},_checkAndUpdateAttrByProp:function(t,e){return e==this.getAttribute(t)||(this.setAttribute(t,e),this._isRendered&&this.render()),this},_checkAndUpdatePropByAttr:function(t,e){return this.properties.hasOwnProperty(t)&&(""+this[t]==e||(this[t]=e,this._isRendered&&this.render())),this},render:function(){var r=this;return this.cleanUpList(),this._setDefaults(),this.fieldContainer||(this.fieldContainer=this.querySelector("span.zs-input-icon"),this.fieldContainer||(this.fieldContainer=document.createElement("span"),this.fieldContainer.classList.add("zs-input-icon"),this.appendChild(this.fieldContainer))),this.fieldElement?this.fieldElement.setAttribute("value",this.value):(this.fieldElement=this.querySelector('input[type="text"]'),this.fieldElement||(this.fieldElement=document.createElement("input"),this.fieldElement.setAttribute("type","text")),this.fieldElement.setAttribute("class","zs-input"),this.fieldElement.setAttribute("value",this.value),this.fieldElement.addEventListener("focus",function(){r.menuContainer.style.display="block",r.menuContainer.querySelector("nav [hover]")?r.menuContainer.querySelector("nav [hover]").scrollIntoView():r.menuContainer.querySelector("nav [active]")&&r.menuContainer.querySelector("nav [active]").scrollIntoView()}),this.fieldElement.addEventListener("change",function(t){r.value=this.value}),this.fieldElement.addEventListener("input",function(t){var e=r._getFormattedTime(this.value);if(null!=e){e=r._time2int(e);for(var i=r.menuContainer.querySelectorAll("nav a"),n=i[0],s=0;s<i.length;s++)Math.abs(Number(i[s].getAttribute("value")-e))<=Math.abs(Number(n.getAttribute("value")-e))&&(n=i[s]);r.menuContainer.querySelector("[hover]")&&r.menuContainer.querySelector("[hover]").removeAttribute("hover"),n.setAttribute("hover",""),n.scrollIntoView()}}),this.fieldContainer.appendChild(this.fieldElement)),this.renderTimeMenu(),this.bindEvents(),this._isRendered||(this.documentClickListener=this.documentClick.bind(this),document.addEventListener("click",this.documentClickListener)),this._isRendered=!0,this},renderTimeMenu:function(){this.menuContainer||(this.menuContainer=document.createElement("div"),this.menuContainer.classList.add("zs-timepicker"),this.menuContainer.classList.add("zs-menu"),this.menuContainer.style.position="absolute",this.attachToBody?(this.menuContainer.style.width=this.fieldContainer.offsetWidth+"px",this.menuContainer.style.top=this.offsetTop+this.offsetHeight+"px",document.body.appendChild(this.menuContainer)):this.fieldContainer.appendChild(this.menuContainer)),this.menuContainer.innerHTML="";for(var t=document.createElement("nav"),e="",i=this._time2int(this.min);i<=this._time2int(this.max);i+=60*this.step)this.value==this._int2time(i)?e+="<a href='javascript:void(0)' value='"+this._time2int(i)+"' active>"+this._int2time(i)+"</a>":e+="<a href='javascript:void(0)' value='"+this._time2int(i)+"'>"+this._int2time(i)+"</a>";return t.innerHTML=e,t.querySelector("[active]")||t.querySelector("a").setAttribute("active",""),this.menuContainer.appendChild(t),this},bindEvents:function(){for(var t=this.menuContainer.querySelectorAll("a"),e=0;e<t.length;e++){t[e].addEventListener("click",this.optionClick.bind(this))}this.fieldElement.addEventListener("keyup",this.onKeyUp.bind(this)),this.menuContainer.querySelector("nav").addEventListener("keyup",this.onKeyUp.bind(this)),this.fieldElement.addEventListener("keydown",this.onKeyDown.bind(this)),this.menuContainer.querySelector("nav").addEventListener("keydown",this.onKeyDown.bind(this))},onKeyDown:function(t){if(13===t.keyCode){var e=this.menuContainer.querySelector("nav").querySelector("a[hover]");e&&"none"!=this.menuContainer.style.display&&(this.selectOption(e),this.menuContainer.querySelector("a[active]")&&this.menuContainer.querySelector("a[active]").removeAttribute("[active]"),e.setAttribute("active",""),this.value=e.innerText,this.menuContainer.style.display="none")}},onKeyUp:function(t){switch(t.keyCode){case 9:t.preventDefault(),t.stopPropagation();break;case 38:if(t.preventDefault(),t.stopPropagation(),n=(i=this.menuContainer.querySelector("nav")).querySelector("a[hover]"))e=n.previousElementSibling;else var e=i.lastElementChild;e&&this.selectOption(e,!0);break;case 40:var i,n;if(t.preventDefault(),t.stopPropagation(),n=(i=this.menuContainer.querySelector("nav")).querySelector("a[hover]"))s=n.nextElementSibling;else var s=i.firstElementChild;s&&this.selectOption(s,!0)}},selectOption:function(t,e){if(this.menuContainer.querySelector("nav a[hover]")&&this.menuContainer.querySelector("nav a[hover]").removeAttribute("hover"),t){if(t.setAttribute("hover",""),window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.match(/iPad/i))return;e&&t.scrollIntoView()}},optionClick:function(t){var e=this.menuContainer.querySelector("[active]");e&&e.removeAttribute("attr"),t.target.setAttribute("active",""),this.value=t.target.innerText,this.menuContainer.style.display="none",t.stopPropagation()},documentClick:function(t){t.target!=this.fieldElement&&(this.menuContainer.style.display="none")},validate:function(t){return(""==t||null!=this._time2int(t))&&(!this.max||!this.min||this._time2int(t)>=this._time2int(this.min)&&this._time2int(t)<=this._time2int(this.max)||(console.log("Entered time should be between min and max range"),!1))},cleanUpList:function(){this.menuContainer&&(this.menuContainer.parentElement.removeChild(this.menuContainer),this.menuContainer=null)},cleanUp:function(){return document.removeEventListener("click",this.documentClickListener),this.documentClickListener=null,this.menuContainer.parentElement.removeChild(this.menuContainer),this.menuContainer=null,this.fieldContainer=null,this.fieldElement=null,this.clearIcon=null,this.innerHTML="",this},_int2time:function(t){if("number"!=typeof t)return null;var e=parseInt(t%60),i=parseInt(t/60%60),n=parseInt(t/3600%24),s=new Date(1970,0,2,n,i,e,0);if(isNaN(s.getTime()))return null;var r,a="";return this.format24?(r=s.getHours(),t===this._ONE_DAY&&(r=0),a+=9<r?r:"0"+r,a+=":",a+=9<(i=s.getMinutes())?i:"0"+i):(a+=0===(r=s.getHours()%12)?"12":r,a+=":",a+=9<(i=s.getMinutes())?i:"0"+i,a+=11<s.getHours()?this.lang.pm:this.lang.am),a},_time2int:function(t){if(""===t||null===t)return null;if("object"==typeof t)return 3600*t.getHours()+60*t.getMinutes()+t.getSeconds();if("string"!=typeof t)return t;"a"!=(t=t.toLowerCase().replace(/[\s\.]/g,"")).slice(-1)&&"p"!=t.slice(-1)||(t+="m");var e="("+this.lang.am.replace(".","")+"|"+this.lang.pm.replace(".","")+"|"+this.lang.AM.replace(".","")+"|"+this.lang.PM.replace(".","")+")?",i=new RegExp("^"+e+"([0-9]?[0-9])\\W?([0-5][0-9])?\\W?([0-5][0-9])?"+e+"$"),n=t.match(i);if(!n)return null;var s=parseInt(1*n[2],10),r=n[1]||n[5],a=s,o=1*n[3]||0,l=1*n[4]||0;if(s<=12&&r){var h=r==this.lang.pm||r==this.lang.PM;a=12==s?h?12:0:s+(h?12:0)}return 3600*a+60*o+l},_getFormattedTime:function(t){return this._int2time(this._time2int(t))},events:{create:function(){},attach:function(){this.render()},attributeChange:function(t){this._checkAndUpdatePropByAttr(t.detail.attributeName,t.detail.newValue)},detach:function(){this.cleanUp()}}},t.timePickerElement=t.customElement(HTMLDivElement,"zs-time-picker-field","div",[t.clear,t.timePicker])}(window.zs||{});
//# sourceMappingURL=timePicker.min.js.map