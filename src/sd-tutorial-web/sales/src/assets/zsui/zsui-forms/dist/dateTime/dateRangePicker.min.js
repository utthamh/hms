!function(e){"use strict";e.dateRangePicker={_startRange:"",_endRange:"",_minRange:"01-"+(new Date).getFullYear(),_maxRange:"12-"+((new Date).getFullYear()+1),_locale:"en",months:[],observedAttributes:["start-range","end-range","min-range","max-range","locale"],_attachToBody:!0,fieldElement:null,rangeContainer:null,render:function(e){return 1==e&&this.cleanUp(),this.fieldContainer||(this.fieldContainer=this.querySelector("span.zs-input-icon"),this.fieldContainer||(this.fieldContainer=document.createElement("span"),this.fieldContainer.classList.add("zs-input-icon"),this.appendChild(this.fieldContainer))),this.fieldElement||(this.fieldElement=this.querySelector('input[type="text"]'),this.fieldElement||(this.fieldElement=document.createElement("input"),this.fieldElement.setAttribute("type","text")),this.fieldElement.setAttribute("class","zs-input"),this.fieldElement.setAttribute("readonly",""),this._openCalendar=this._openCalendar||this.openCalendar.bind(this),this.fieldElement.addEventListener("focus",this._openCalendar),this.updateFieldText(),this.fieldContainer.appendChild(this.fieldElement)),this.renderCalendarIcon(),this.generateMonthsArray(this.locale),this.renderRangeCalendar(),this._documentClickListener||(this._documentClickListener=this.documentClick.bind(this),document.addEventListener("click",this._documentClickListener)),this},renderCalendarIcon:function(){this.calendarIcon||(this.calendarIcon=this.querySelector("a.zs-icon-calendar"),this.calendarIcon||(this.calendarIcon=document.createElement("a"),this.calendarIcon.classList.add("zs-icon"),this.calendarIcon.classList.add("zs-icon-calendar"),this.calendarIcon.addEventListener("click",this._openCalendar),this.fieldContainer.appendChild(this.calendarIcon)))},renderRangeCalendar:function(){return this.rangeContainer||(this.rangeContainer=document.createElement("div"),this.rangeContainer.classList.add("zs-range-calendar"),document.body.appendChild(this.rangeContainer),this.setPosition()),this._setDateWindow(),this.renderCalendarHeader(),this.renderCalendarBody(),this.renderCalendarFooter(),this.rangeContainer.style.display="none",this},renderCalendarHeader:function(){if(this.rangeContainer)return this.headerContainer||(this.headerContainer=document.createElement("header"),this.headerContainer.innerHTML="<span class='prev-btn-container'></span><span class='next-btn-container'></span>",this.headerContainer.classList.add("zs-clear"),this.rangeContainer.appendChild(this.headerContainer),this.prevBtn=document.createElement("a"),this.prevBtn.setAttribute("href","javascript:void(0)"),this.prevBtn.setAttribute("role","prev"),this.prevYearSpan=document.createElement("span"),this.nextYearSpan=document.createElement("span"),this.nextBtn=document.createElement("a"),this.nextBtn.setAttribute("href","javascript:void(0)"),this.nextBtn.setAttribute("role","next"),this.headerContainer.querySelector(".prev-btn-container").appendChild(this.prevBtn),this.headerContainer.querySelector(".next-btn-container").appendChild(this.nextYearSpan),this.headerContainer.querySelector(".next-btn-container").appendChild(this.nextBtn),this.headerContainer.querySelector(".prev-btn-container").appendChild(this.prevYearSpan),this.prevBtn.addEventListener("click",this),this.nextBtn.addEventListener("click",this)),this.prevYearSpan.innerHTML=this.prevYear,this.nextYearSpan.innerHTML=this.nextYear,this.prevYear<=this._parsedMinRange.year?this.prevBtn.setAttribute("disabled","disabled"):this.prevBtn.removeAttribute("disabled"),this.nextYear>=this._parsedMaxRange.year?this.nextBtn.setAttribute("disabled","disabled"):this.nextBtn.removeAttribute("disabled"),this},handleEvent:function(e){var t="on"+e.type.charAt(0).toUpperCase()+e.type.slice(1);"function"==typeof this[t]&&this[t](e)},onClick:function(e){e.target==this.prevBtn&&this.prevBtnClickHandler(e),e.target==this.nextBtn&&this.nextBtnClickHandler(e)},prevBtnClickHandler:function(e){e.stopPropagation();var t=this._parsedMinRange;t.year<=this.prevYear-1&&(this.nextYear=this.prevYear--,this.nextBtn.removeAttribute("disabled")),this.prevYear<=t.year&&this.prevBtn.setAttribute("disabled","disabled"),this.prevYearSpan.innerHTML=this.prevYear,this.nextYearSpan.innerHTML=this.nextYear,this.renderCalendarBody()},nextBtnClickHandler:function(e){e.stopPropagation();var t=this._parsedMaxRange;t.year>=this.nextYear+1&&(this.prevYear=this.nextYear++,this.prevBtn.removeAttribute("disabled")),this.nextYear>=t.year&&this.nextBtn.setAttribute("disabled","disabled"),this.prevYearSpan.innerHTML=this.prevYear,this.nextYearSpan.innerHTML=this.nextYear,this.renderCalendarBody()},renderCalendarBody:function(){if(this.rangeContainer){for(var e="<tbody>",t="<tbody>",n=this.prevYear,a=this.nextYear,i=this.startRange&&this.startRange.length?this._parsedStartRange:{month:9999,year:9999},r=this.endRange&&this.endRange.length?this._parsedEndRange:{month:-9999,year:-9999},s=this._parsedMinRange,h=this._parsedMaxRange,d=0;d<3;d++){e+="<tr>";for(var l=0;l<4;l++){var o=4*d+l;new Date(n,o)>=new Date(i.year,i.month-1)&&new Date(n,o)<=new Date(r.year,r.month-1)&&new Date(n,o)>=new Date(s.year,s.month-1)?e+='<td current date="'+(o+1)+"-"+n+'">'+this.months[o]+"</td > ":new Date(n,o)<new Date(s.year,s.month-1)||new Date(n,o)>new Date(h.year,h.month-1)?e+='<td disabled date="'+(o+1)+"-"+n+'">'+this.months[o]+"</td > ":e+='<td date="'+(o+1)+"-"+n+'">'+this.months[o]+"</td > "}e+="</tr>"}for(d=0;d<3;d++){t+="<tr>";for(l=0;l<4;l++){o=4*d+l;new Date(a,o)>=new Date(i.year,i.month-1)&&new Date(a,o)<=new Date(r.year,r.month-1)&&new Date(a,o)<=new Date(h.year,h.month-1)?t+='<td current date="'+(o+1)+"-"+a+'">'+this.months[o]+"</td > ":new Date(a,o)<new Date(s.year,s.month-1)||new Date(a,o)>new Date(h.year,h.month-1)?t+='<td disabled date="'+(o+1)+"-"+a+'">'+this.months[o]+"</td > ":t+='<td date="'+(o+1)+"-"+a+'">'+this.months[o]+"</td > "}t+="</tr>"}e+="</tbody>",t+="</tbody>",this.prevTable||(this.prevTable=document.createElement("table")),this.nextTable||(this.nextTable=document.createElement("table")),this.tableContainer?(this._unbindCellClickEvent(),this.prevTable.innerHTML="",this.nextTable.innerHTML=""):(this.tableContainer=document.createElement("section"),this.tableContainer.classList.add("months-container"),this.tableContainer.appendChild(this.prevTable),this.tableContainer.appendChild(this.nextTable),this.rangeContainer.appendChild(this.tableContainer)),this.prevTable.innerHTML=e,this.nextTable.innerHTML=t,this._bindCellClickEvent()}},renderCalendarFooter:function(){var e=this;this.rangeContainer&&(this.footer||(this.footer=document.createElement("footer"),this.footer.classList.add("clear-container"),this.clearBtn=document.createElement("a"),this.clearBtn.innerHTML="Clear",this.clearBtn.addEventListener("click",function(){e.startRange="",e.endRange="",e._isFirstClick=!1}),this.footer.appendChild(this.clearBtn),this.rangeContainer.appendChild(this.footer)))},generateMonthsArray:function(e){e=e||"en",this.months=[];for(var t=0;t<12;t++)try{this.months.push(new Date(2018,t).toLocaleString(e,{month:"short"}))}catch(e){console.log(e)}return this},setPosition:function(){if(this._attachToBody){var e=this.fieldElement.getBoundingClientRect();this.rangeContainer.style.top=e.top+e.height+window.pageYOffset+"px",this.rangeContainer.style.left=e.left+window.pageXOffset+"px"}else this.fieldContainer.appendChild(this.rangeContainer);return this},openCalendar:function(e){e.stopPropagation();var t=this;t._setDateWindow(),t.dispatchEvent(new CustomEvent("beforeOpen")),t.renderCalendarHeader(),t.renderCalendarBody(),t.oldRange={startDate:t._parsedStartRange,endDate:t._parsedEndRange},t.rangeContainer.style.display="block",t.setPosition(),t.dispatchEvent(new CustomEvent("open"))},closeCalendar:function(){if(this.rangeContainer&&"none"!=this.rangeContainer.style.display){this.dispatchEvent(new CustomEvent("beforeClose"));var e={startDate:this._parsedStartRange,endDate:this._parsedEndRange},t=this.oldRange;t&&(e.startDate.month==t.startDate.month&&e.startDate.year==t.startDate.year&&e.endDate.month==t.endDate.month&&e.endDate.year==t.endDate.year||this.dispatchEvent(new CustomEvent("change",{detail:{newRange:e,oldRange:t}}))),this.rangeContainer.style.display="none",this._isFirstClick=!1,this.dispatchEvent(new CustomEvent("close"))}},_getParsedDate:function(e){if(!e.length)return{month:"",year:""};var t=e.split("-");return 2==t.length?{month:parseInt(t[0]),year:parseInt(t[1])}:(console.error("Cannot parse date : ",e),{month:"",year:""})},_setDateWindow:function(e){null==this._parsedMaxRange&&(this._parsedMaxRange=this._getParsedDate(this.maxRange)),null==this._parsedMinRange&&(this._parsedMinRange=this._getParsedDate(this.minRange)),null==this._parsedEndRange&&(this._parsedEndRange=this._getParsedDate(this.endRange)),null==this._parsedStartRange&&(this._parsedStartRange=this._getParsedDate(this.startRange));var t=this.maxRange&&this.maxRange.length&&this._parsedMaxRange,n=this.minRange&&this.minRange.length&&this._parsedMinRange,a=this.startRange&&this.startRange.length&&this._parsedStartRange,i=this.endRange&&this.endRange.length&&this._parsedEndRange;0!=e&&(n.year>a.year&&(this.minRange="01-"+a.year),t.year<i.year&&(this.maxRange="12-"+i.year),a.year<t.year?(this.prevYear=a.year,this.nextYear=this.prevYear+1):(a.year==t.year?this.nextYear=a.year:t.year>(new Date).getFullYear()+1?this.nextYear=(new Date).getFullYear()+1:this.nextYear=t.year,this.prevYear=this.nextYear-1))},_bindCellClickEvent:function(){if(this.prevTable&&this.nextTable){var e=this.rangeContainer.querySelectorAll("table>tbody tr td:not([disabled])"),i=this;i._isFirstClick=!!i._isFirstClick&&i._isFirstClick,this._cellClickHandler=function(e){var t=e.target;if(e.stopPropagation(),i._isFirstClick=!i._isFirstClick,i._isFirstClick)i.startRange=t.getAttribute("date"),i.endRange=i.startRange;else{var n=i._parsedStartRange,a=i._getParsedDate(t.getAttribute("date"));new Date(n.year,n.month)>new Date(a.year,a.month)?(console.warn("End Date cannot be before selected Start Date in calendar. Swapping values"),a=i.startRange,i.startRange=t.getAttribute("date"),i.endRange="",i.endRange=a):i.endRange=t.getAttribute("date")}};for(var t=0;t<e.length;t++)e[t].addEventListener("click",this._cellClickHandler)}},_unbindCellClickEvent:function(){if(this._cellClickHandler)for(var e=this.tableContainer.querySelectorAll("table>tbody tr td"),t=0;t<e.length;t++)e[t].removeEventListener("click",this._cellClickHandler)},documentClick:function(e){e.target!=this.fieldElement&&(this.rangeContainer.contains(e.target)||this.closeCalendar())},validate:function(){return!(!this.startRange.length&&!this.endRange.length)||(console.warn("Empty start and end dates"),!1)},getSelectedRange:function(){return{startDate:this._parsedStartRange,endDate:this._parsedEndRange}},updateFieldText:function(){if(!this.fieldElement)return this;if(!this.startRange&&!this.endRange)return this.fieldElement.value="",this;var e=this._parsedStartRange,t=this._parsedEndRange;this.months.length||this.generateMonthsArray(this.locale);var n=this.months[e.month-1]+" "+e.year+" - "+this.months[t.month-1]+" "+t.year;return this.fieldElement.value=n,this},cleanUp:function(){return document.removeEventListener("click",this._documentClickListener),this._documentClickListener=null,this._openCalendar=null,this.calendarIcon=null,this.rangeContainer&&this.rangeContainer.parentElement&&this.rangeContainer.parentElement.removeChild(this.rangeContainer),this.rangeContainer=null,this.fieldContainer=null,this.fieldElement=null,this.nextTable=null,this.prevTable=null,this.clearBtn=null,this.prevBtn&&this.prevBtn.removeEventListener("click",this),this.nextBtn&&this.nextBtn.removeEventListener("click",this),this.prevBtn=null,this.nextBtn=null,this.prevYear=null,this.nextYear=null,this._isFirstClick=null,this.headerContainer=null,this.footer=null,this.tableContainer=null,this.innerHTML="",this},events:{create:function(){var a=this;a.syncObservedAttr({"min-range":{type:"string",onChange:function(e,t,n){t!==n&&(this.minRange.length&&(this._parsedMinRange=this._getParsedDate(this.minRange)),a._setDateWindow(),a.renderCalendarHeader(),a.renderCalendarBody())}},"max-range":{type:"string",onChange:function(e,t,n){t!==n&&(this.maxRange.length&&(this._parsedMaxRange=this._getParsedDate(this.maxRange)),a._setDateWindow(),a.renderCalendarHeader(),a.renderCalendarBody())}},"start-range":{type:"string",onChange:function(e,t,n){t!==n&&(this.startRange.length&&(this._parsedStartRange=this._getParsedDate(this.startRange)),a._setDateWindow(!1),a.renderCalendarHeader(),this.renderCalendarBody(),this.updateFieldText())}},"end-range":{type:"string",onChange:function(e,t,n){t!==n&&(this.endRange.length&&(this._parsedEndRange=this._getParsedDate(this.endRange)),a._setDateWindow(!1),a.renderCalendarHeader(),this.renderCalendarBody(),this.validate(),this.updateFieldText())}},locale:{type:"string",onChange:function(e,t,n){t!==n&&this.render()}}})},attach:function(){var e=this;window.requestAnimationFrame(function(){e.render()})},detach:function(){this.cleanUp()}}},e.dateRangePickerElement=e.customElement(HTMLElement,"zs-date-range-picker",null,[e.syncPropAttr,e.dateRangePicker])}(window.zs||{});
//# sourceMappingURL=dateRangePicker.min.js.map