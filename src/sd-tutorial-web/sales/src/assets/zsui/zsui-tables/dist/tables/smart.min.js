var zs=function(e){"use strict";return e.tableSmartRender={_data:null,_hash:null,_rowHash:null,_changes:null,getRowKey:function(e,h){return e},getHash:function(e){return JSON.stringify(e)},getRowHash:function(e,h){return JSON.stringify(h)},properties:{data:{set:function(e){this.detectChangesUpdateHash(e)},get:function(){return this._data}}},detectChangesUpdateHash:function(e){null!=this._data&&this._rowHash&&this.detectChanges(e);var h=performance.now();this._rowHash={},this._hash="";for(var t=0;t<e.length;t++){var s=e[t],a=this.getRowHash(t,s);this._rowHash[this.getRowKey(t,s)]={hash:a,data:s,index:t},this._hash+=(""==this._hash?"":",")+a}this._hash="["+this._hash+"]",console.log("hashes created in",performance.now()-h),this._data=e},detectChanges:function(e){var h=performance.now();this._changes={};var t=this.getHash(e);if(this._hash==t)return console.log("no changes"),this._changes=!1,this._changes;if((null==this._data||0==this._data.length)&&e&&e.length)return console.log("new data"),this._changes=-1,this._changes;for(var s={},a=0;a<e.length;a++){var n=e[a],i=this.getRowKey(a,n),r=this.getRowHash(a,n);s[i]={hash:r,data:n,index:a},this._rowHash[i]?(this._rowHash[i].hash!=r&&(this._changes.modify||(this._changes.modify=[]),this._changes.modify.push({key:i,index:a,data:n})),this._rowHash[i].index!=a&&(this._changes.move||(this._changes.move=[]),this._changes.move.push({key:i,index:a,data:n}))):(this._changes.add||(this._changes.add=[]),this._changes.add.push({key:i,index:a,data:n}))}for(var a in this._rowHash)s[a]||(this._changes.remove||(this._changes.remove=[]),this._changes.remove.push({key:a,index:this._rowHash[a].index,data:this._rowHash[a].data}));return console.log("changes detected",this._changes,"in "+(performance.now()-h)),this._changes},renderChanges:function(){var e,h,t,s,a,n;this.tableContainer;if(this._changes)if(-1!=this._changes)if(this._changes.move)this.renderTable(this.data);else{if(this._changes.remove)for(h=this._changes.remove,e=0;e<h.length;e++)s=h[e].data,t=h[e].key,(a=this.tbody.querySelector('tr[key="'+t+'"]'))&&a.parentNode.removeChild(a);if(this._changes.modify)for(h=this._changes.modify,e=0;e<h.length;e++)s=h[e].data,t=h[e].key,a=this.renderRow(t,s),(n=this.tbody.querySelector('tr[key="'+t+'"]'))&&n.parentNode.replaceChild(a,n);if(this._changes.add)for(h=this._changes.add,e=0;e<h.length;e++)s=h[e].data,t=h[e].key,a=this.renderRow(t,s),this.tbody.appendChild(a);this.dispatchEvent(new CustomEvent("render"))}else this.renderTable(this.data)}},e}(window.zs||{});
//# sourceMappingURL=smart.min.js.map