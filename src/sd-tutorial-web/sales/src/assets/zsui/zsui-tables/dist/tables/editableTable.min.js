var zs=function(e){"use strict";return e.tableEditable={overlayElement:null,formatCell:function(e,t,i){return e},isEditable:function(e,t,i){return!0},renderCell:function(e,t,i){var n=document.createElement("td");return n.setAttribute("key",t),this.isEditable(i,e,t)?(n.setAttribute("edit",""),n.innerHTML='<p class="zs-cell">'+this.formatCell(i,e,t)+"</p>"):n.innerHTML=this.formatCell(i,e,t),n},focusEditField:function(){if(this.overlayElement){var e=this.overlayElement.querySelector('[tabindex="2"]');e&&e.focus()}},nextField:function(){var e=this.overlayElement._lastTd,t=$(e).nextAll("[edit]");if(!t.length){var i=e.parentNode;if(!i.nextSibling)return;if(!(t=$(i.nextSibling).find("[edit]")).length)return}this.renderOverlay(t[0]),this.overlayElement.style.display="block",this.focusEditField()},prevField:function(){var e=this.overlayElement._lastTd,t=$(e).prevAll("[edit]");if(!t.length){var i=e.parentNode;if(!i.previousSibling)return;if(!(t=$(i.previousSibling).find("[edit]").last()).length)return}this.renderOverlay(t[0]),this.overlayElement.style.display="block",this.focusEditField()},updateCellData:function(e,t,i){this.data[Number(t)][Number(i)]=e;var n=this.renderCell(t,i,e);this.overlayElement._lastTd.innerHTML=n.innerHTML,this.dispatchEvent(new CustomEvent("cellchange",{detail:{newValue:e,rowIndex:t,colIndex:i}}))},fieldChange:function(e){e._originalValue!=e.value&&this.updateCellData(e.value,e._rowIndex,e._colIndex)},createField:function(e,t,i,n){var l=document.createElement("input");return l.classList.add("zs-input"),l.setAttribute("type","text"),l.setAttribute("tabindex",n),l.value=e,l._originalValue=e,l},renderField:function(e){var t,i=this,n=e._lastTd,l=n.getAttribute("key"),r=n.parentNode.getAttribute("key"),s=n.querySelector(".zs-cell").innerHTML;t=this.createField(s,r,l,2),$(t).css({width:$(n).width(),height:$(n).height()}),e.appendChild(t),t._rowIndex=r,t._colIndex=l,t.focus(),t.addEventListener("change",function(e){i.fieldChange(t)})},positionOverlay:function(){var e=$(this.overlayElement);this.scrollEl;if(this.overlayElement&&e.is(":visible")&&this.overlayElement._lastTd){var t=this.overlayElement._lastTd,i={top:t.offsetTop-this.table.offsetTop,left:t.offsetLeft-this.table.offsetLeft};$(this.overlayElement).css({top:i.top,left:i.left,minWidth:$(t).width(),minHeight:$(t).height()})}},renderOverlay:function(e){var t=this;this.overlayElement?this.overlayElement.innerHTML="":(this.considerPosition("relative"),this.overlayElement=document.createElement("div"),this.overlayElement.setAttribute("class","zs-edit-overlay"),this.overlayElement.style.position="absolute"),this.appendChild(this.overlayElement),this.overlayElement._lastTd=e,this.positionOverlay(),this.renderField(this.overlayElement),$('<input tabindex="1" type="text" style="position:absolute;width:0px;height:0px">').on("focus",function(){t.prevField()}).appendTo(this.overlayElement),$('<input tabindex="3" type="text" style="position:absolute;width:0px;height:0px">').on("focus",function(){t.nextField()}).appendTo(this.overlayElement)},cellClick:function(e){var t=e.target;$(t).parents(".zs-edit-overlay").length||(null!=e.target.getAttribute("edit")?(this.renderOverlay(t),$(this.overlayElement).show()):this.overlayElement&&($(this.overlayElement).remove(),this.overlayElement=null))},onWindowResize:function(){if(!this._resizeAnimationFrame){var e=this;this._resizeAnimationFrame=window.requestAnimationFrame(function(){e.dispatchEvent(new CustomEvent("resize")),e._resizeAnimationFrame=null})}},events:{scroll:function(){if(!this._scrollAnimationFrame){var e=this;this._scrollAnimationFrame=window.requestAnimationFrame(function(){e.positionOverlay(),e._scrollAnimationFrame=null})}},attach:function(){this._onWindowResizeBound=this.onWindowResize.bind(this),$(window).resize(this._onWindowResizeBound)},detach:function(){$(window).off("resize",this._onWindowResizeBound),window.cancelAnimationFrame(this._resizeAnimationFrame)},render:function(){this.overlayElement&&$(this.overlayElement).remove()},click:function(e){this.cellClick.apply(this,arguments)},resize:function(){this.positionOverlay()}}},e}(window.zs||{});
//# sourceMappingURL=editableTable.min.js.map