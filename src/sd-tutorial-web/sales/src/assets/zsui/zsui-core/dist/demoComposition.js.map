{"version":3,"sources":["../demo/demoComposition.m.js"],"names":["BigNumberCls","_value","value","suffixes","suffixNum","Math","floor","length","shortValue","precision","parseFloat","pow","toPrecision","dotLessShortValue","replace","toFixed","toString","newValue","IncrementalButton","amount","Number","addEventListener","event","increment","innerHTML","HTMLButtonElement","mix","prototype","customElements","define","extends","incBtn","document","createElement","is","classList","add","body","appendChild","BigNumberClsMixin","Base","incMixBtn"],"mappings":"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","sourcesContent":["// Display big numbers\r\nclass BigNumberCls {\r\n\t\t\t\r\n\tget value() {\r\n\t\treturn this._value || 0;\r\n\t}\r\n\tset value(newValue) {\r\n\t\tthis._value = newValue;\r\n\t}\r\n\tget suffixes() {return [\"\", \"k\", \"m\", \"b\",\"t\"]}\r\n\t\r\n\tvalueOf() {\r\n\t\treturn this._value;\r\n\t}\r\n\ttoString(value) {\r\n\t\tvalue  = value || this.value;\r\n\t\tif (value >= 1000) {\r\n\t\t\tvar suffixes = this.suffixes;\r\n\t\t\tvar suffixNum = Math.floor( (\"\"+value).length/3 );\r\n\t\t\tvar shortValue = '';\r\n\t\t\tfor (var precision = 2; precision >= 1; precision--) {\r\n\t\t\t\tshortValue = parseFloat( (suffixNum != 0 ? (value / Math.pow(1000,suffixNum) ) : value).toPrecision(precision));\r\n\t\t\t\tvar dotLessShortValue = (shortValue + '').replace(/[^a-zA-Z 0-9]+/g,'');\r\n\t\t\t\tif (dotLessShortValue.length <= 2) { break; }\r\n\t\t\t}\r\n\t\t\tif (shortValue % 1 != 0)  shortValue = shortValue.toFixed(1);\r\n\t\t\treturn  shortValue+suffixes[suffixNum];\r\n\t\t}\r\n\t\treturn value.toString();\r\n\t}\r\n}\r\n\r\n// Incremental button\r\nclass IncrementalButton extends HTMLButtonElement {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t}\r\n\tincrement(amount) {\r\n\t\tthis.value = (Number(this.value) || 0) + amount; \r\n\t}\r\n\tconnectedCallback() {\r\n\t\tthis.addEventListener('click', function(event) {\r\n\t\t\tthis.increment(1000);\r\n\t\t\tthis.innerHTML = this.toString ? this.toString(this.value) : this.value\r\n\r\n\t\t});\r\n\t}\r\n}\r\n\r\n// Apply composition\r\nmix(IncrementalButton.prototype, BigNumberCls.prototype);\r\n\r\n// Define custom Element\r\ncustomElements.define('inc-button', IncrementalButton, {extends: 'button'});\r\n\r\n// Create a button and append it to the DOM\r\nvar incBtn = document.createElement('button', {is: 'inc-button'});\r\nincBtn.innerHTML = 'Click me';\r\nincBtn.classList.add('zs-button');\r\ndocument.body.appendChild(incBtn);\r\n\r\n\r\n// Functional mixin of a BigNumber class\r\nfunction BigNumberClsMixin(Base) {\r\n\treturn class BigNumberCls extends Base {\r\n\t\tget value() {\r\n\t\t\treturn this._value || 0;\r\n\t\t}\r\n\t\tset value(newValue) {\r\n\t\t\tthis._value = newValue;\r\n\t\t}\r\n\t\tget suffixes() {return [\"\", \"k\", \"m\", \"b\",\"t\"]}\r\n\t\t\r\n\t\tvalueOf() {\r\n\t\t\treturn this._value;\r\n\t\t}\r\n\t\ttoString(value) {\r\n\t\t\tvalue  = value || this.value;\r\n\t\t\tif (value >= 1000) {\r\n\t\t\t\tvar suffixes = this.suffixes;\r\n\t\t\t\tvar suffixNum = Math.floor( (\"\"+value).length/3 );\r\n\t\t\t\tvar shortValue = '';\r\n\t\t\t\tfor (var precision = 2; precision >= 1; precision--) {\r\n\t\t\t\t\tshortValue = parseFloat( (suffixNum != 0 ? (value / Math.pow(1000,suffixNum) ) : value).toPrecision(precision));\r\n\t\t\t\t\tvar dotLessShortValue = (shortValue + '').replace(/[^a-zA-Z 0-9]+/g,'');\r\n\t\t\t\t\tif (dotLessShortValue.length <= 2) { break; }\r\n\t\t\t\t}\r\n\t\t\t\tif (shortValue % 1 != 0)  shortValue = shortValue.toFixed(1);\r\n\t\t\t\treturn  shortValue+suffixes[suffixNum];\r\n\t\t\t}\r\n\t\t\treturn value.toString();\r\n\t\t}\r\n\t}\r\n}\r\n\r\n// Define another custom button but with using functional composition\r\ncustomElements.define('inc-mix-button', BigNumberClsMixin(IncrementalButton), {extends: 'button'});\r\n\r\n// Create a button and append it to the DOM\r\nvar incMixBtn = document.createElement('button', {is: 'inc-mix-button'});\r\nincMixBtn.innerHTML = 'Click me';\r\nincMixBtn.classList.add('zs-button');\r\ndocument.body.appendChild(incMixBtn);"],"file":"demoComposition.js"}