# Fetch service

Wraps a [Fetch API](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API) to comply with [Service](./service.md) protocol. Use it as a better alternative to [HTTPService](./httpService).

```javascript
import FetchService from "./service/fetchService.m.js";

// Create a service
let userAPI = new FetchService({
	url: 'https://jsonplaceholder.typicode.com/users',
	method: 'GET',
	query: { // default parameters
		_page: 1,
		_limit: 5
	}
});

// Call the service
userAPI.get({query:{_page: 2}})
	.then(userAPI.response) // Handle errors and parse json
	.then(data => console.log(data)); // display data
```

# IE11

To support IE11 you need a Promise polyfill, a URL polyfill and a Fetch polyfill.

```HTML
<script src="https://ui.zsservices.com/zsui/polyfills/polyfills.js"></script> 
<script src="state/url-polyfill.min.js"></script>
<script src="service/fetch.min.js"></script>
```

ES5

```HTML
<script src="service/fetchService.js"></script>
<script>
	var FetchService = window.fetchServiceM.default;
</script>
```

# API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

## FetchService

**Extends Service**

Wraps a Fetch API to comply with [Service][1] protocol. Use it as a better alternative to [HTTPService][2] which is based on `XMLHTTPRequest`.

### Parameters

-   `params` **[object][3]** Request parameters

### url

Prepare an URL for the request. Helps to inject parameters like `{query: {userId:1}, path: {users: 1}}` in the URL to get something like `https://jsonplaceholder.typicode.com/users/1?userId=2`

Returns **[string][4]** New URL string.

### applyParams

How we apply parameters when we call a service multiple times

#### Parameters

-   `newParams` **[object][3]** New parameters

### response

Default response handler. Will handle errors and parse the data in a most typical way. Override this method to support complex cases.

#### Parameters

-   `response` **[Response][5]** Response of the request.

#### Examples

```javascript
userAPI.get({query:{_page: 2}}).then(userAPI.response)
```

Returns **[Promise][6]** Promise of a processed results.

### request

Create an HTTP request in a compatible with the [Service][1] protocol way.

#### Parameters

-   `params` **[object][3]** Parameters of the request

## Service

Service provides a standardize way to access and modify data

### Parameters

-   `executor` **[function][7]** Function to be used in call method to create a Promise

### Examples

```javascript
import Service from "./service/service.m.js"
```

```javascript
let myService = new Service((params,resolve, reject) => {resolve({test:1})})
```

### get

Get a resource

#### Parameters

-   `params`  

#### Examples

```javascript
myService.get({id:1}).then(data=>console.log(data));
```

Returns **[Promise][6]** Promise

### post

Create a new resource

#### Parameters

-   `params`  

#### Examples

```javascript
myService.post({id:1, name: 'New name', value: 1}).then(data=>console.log(data));
```

Returns **[Promise][6]** Promise

### put

Update a resource

#### Parameters

-   `params`  

#### Examples

```javascript
myService.put({id:1, name: 'New name', value: 1}).then(data=>console.log(data));
```

Returns **[Promise][6]** Promise

### patch

Modify a resource

#### Parameters

-   `params`  

#### Examples

```javascript
myService.patch({id:1, name: 'New name'}).then(data=>console.log(data));
```

Returns **[Promise][6]** Promise

### delete

Delete a resource

#### Parameters

-   `params`  

#### Examples

```javascript
myService.request({id:1}).then(data=>console.log(data));
```

Returns **[Promise][6]** Promise

### request

Generic service service with parameters

#### Parameters

-   `params`  

#### Examples

```javascript
myService.request({param:1}).then(data=>console.log(data));
```

Returns **[Promise][6]** Promise

[1]: #service

[2]: HTTPService

[3]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[4]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[5]: https://developer.mozilla.org/docs/Web/Guide/HTML/HTML5

[6]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise

[7]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function
