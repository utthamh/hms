# HTTP Service

We often need to work with external HTTP resources to get data and manipulate data.

Browsers provide `XMLHTTPRequest` class for that. 

This module provides a wrapper of `XMLHTTRequest` that complies with our [Service interface](service.md).

```javascript
import HTTPService from "./service/httpService.m.js";

// Create an API to get users
let userAPI = new HTTPService({
	url: 'https://jsonplaceholder.typicode.com/users',
	method: 'GET',
	query: {
		_page: 1,
		_limit: 5
	}
});

// Call our API and display users
userAPI.get({
	query: {
		_limit: 1,
		_page: 1
	}
}).then(data => console.log(data));
```

# API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

## HTTPService

**Extends Service**

Creates a wrapper around `XMLHTTPRequest` and complies with [Service][1] protocol

### Parameters

-   `params` **[object][2]** Request parameters

### Examples

```javascript
var userAPI = new HTTPService({url: 'https://jsonplaceholder.typicode.com/users'});
```

### xhr

Creates and returns an `XMLHTTPRequest` associated with this `HTTPService`

Type: [XMLHttpRequest][3]

### response

Handle an HTTP response usually to parse data

#### Parameters

-   `xhr` **[XMLHttpRequest][3]** Current request object

Returns **([Blob][4] \| [object][2] \| [string][5])** Response with parsed data or Blob or text

### handleEvent

How we handle request events to resolve or reject the promise of this service

#### Parameters

-   `e` **[Event][6]** XMLHTTPRequest event

### requestBody

Prepare body for the request

#### Parameters

-   `params` **[object][2]** Parameters of the request

Returns **[FormData][7]** Form data object we can use in send method of an opened HTTP request

### abort

Abort a running request

### requestHeaders

Prepare and set request headers

#### Parameters

-   `xhr` **[XMLHttpRequest][3]** Current request object
-   `params` **[object][2]** Parameters `{method: 'GET', headers: {'X-Text': 'My Value'}}`

### requestUrl

Prepare an URL for the request. Helps to inject parameters in the URL of the request.

#### Parameters

-   `params` **[object][2]** Parameters of the request

#### Examples

```javascript
myApi.requestUrl({url: 'https://jsonplaceholder.typicode.com/', path: {users:1}, query: {userId: 2}}); // https://jsonplaceholder.typicode.com/users/1?userId=2"
```

Returns **[string][5]** New URL string.

### send

Send an HTTP request

### applyParams

How we apply parameters when we call a service multiple times

#### Parameters

-   `newParams` **[object][2]** New parameters

### executor

Wrap an HTTP request as a Promise to comply with [Service][1] protocol

## Service

Service provides a standardize way to access and modify data

### Parameters

-   `executor` **[function][8]** Function to be used in call method to create a Promise

### Examples

```javascript
import Service from "./service/service.m.js"
```

```javascript
let myService = new Service((params,resolve, reject) => {resolve({test:1})})
```

### get

Get a resource

#### Parameters

-   `params`  

#### Examples

```javascript
myService.get({id:1}).then(data=>console.log(data));
```

Returns **[Promise][9]** Promise

### post

Create a new resource

#### Parameters

-   `params`  

#### Examples

```javascript
myService.post({id:1, name: 'New name', value: 1}).then(data=>console.log(data));
```

Returns **[Promise][9]** Promise

### put

Update a resource

#### Parameters

-   `params`  

#### Examples

```javascript
myService.put({id:1, name: 'New name', value: 1}).then(data=>console.log(data));
```

Returns **[Promise][9]** Promise

### patch

Modify a resource

#### Parameters

-   `params`  

#### Examples

```javascript
myService.patch({id:1, name: 'New name'}).then(data=>console.log(data));
```

Returns **[Promise][9]** Promise

### delete

Delete a resource

#### Parameters

-   `params`  

#### Examples

```javascript
myService.request({id:1}).then(data=>console.log(data));
```

Returns **[Promise][9]** Promise

### request

Generic service service with parameters

#### Parameters

-   `params`  

#### Examples

```javascript
myService.request({param:1}).then(data=>console.log(data));
```

Returns **[Promise][9]** Promise

[1]: #service

[2]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[3]: https://developer.mozilla.org/docs/Web/API/XMLHttpRequest

[4]: https://developer.mozilla.org/docs/Web/API/Blob

[5]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[6]: https://developer.mozilla.org/docs/Web/API/Event

[7]: https://developer.mozilla.org/docs/Web/API/FormData

[8]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function

[9]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise
