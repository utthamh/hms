var zs=function(t){"use strict";return t.state={url:null,query:null,state:null,parseQuery:function(t){var e;if(!t)return null;"?"==t.slice(0,1)&&(t=t.slice(1)),this.query=this.query||{};for(e in this.query)delete this.query[e];var r=t.split("&");for(e=0;e<r.length;e++){var a=r[e].split("=");this.query[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return this.query},reflectState:function(){var t={hash:this.url.hash,pathname:this.url.pathname};Object.assign(t,this.query),this.updateState(t)},updateState:function(t){var e,r=Object.create(this.state);if(Object.assign(r,t),this.state)for(var a in r)this.state[a]!=r[a]&&((e=e||{})[a]=r[a]);this.state=this.state||{},Object.assign(this.state,r);var s=new CustomEvent("statechange",{detail:{newState:this.state,changed:e}});this.dispatchEvent(s)},parseUrl:function(t){var e=document.createElement("a");return e.href=t,this.url={},Object.assign(this.url,{href:e.href,protocol:e.protocol,host:e.host,hostname:e.hostname,port:e.port,pathname:e.pathname,search:e.search,hash:e.hash,username:e.username,password:e.password,origin:e.origin}),this.url.pathname&&"/"==this.url.pathname.slice(0,1)&&(this.url.pathname=this.url.pathname.slice(1)),this.url.search&&"?"==this.url.search.slice(0,1)&&(this.url.search=this.url.search.slice(1)),this.url},watchLocation:function(){var t=this;window.addEventListener("hashchange",function(){t.updateUrl()})},saveState:function(t,e,r){if(!localStorage)return!1;var a={};Object.assign(a,e||this.state),r=r||["hash","pathname"];for(var s in r)delete a[r[s]];localStorage.setItem(t,JSON.stringify(a))},loadState:function(t){if(!localStorage)return!1;var e=localStorage.getItem(t);e&&this.updateState(JSON.parse(e))},serialize:function(t){var e=[];if(t){for(var r in t)t.hasOwnProperty&&!t.hasOwnProperty(r)||e.push(encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e.join("&")}},joinUrl:function(t){if((t=t||this.url).href)return t.href;var e=document.createElement("a");return e.href=location.href,Object.assign(e,t),e.href},updateUrl:function(t){this.parseUrl(t||location.href),this.parseQuery(this.url.search),this.reflectState()},events:{create:function(){this.watchLocation()}}},t.service={services:{},registerService:function(t,e){this.services[t]=e},service:function(t,e){if(this.services[t]){var r=this;return new Promise(function(a,s){r.services[t](e,a,s)})}},cache:function(t,e,r){if(!localStorage)return!1;if(!e){var a=localStorage.getItem(t);if(!a)return!1;var s=JSON.parse(a);return!!s.data&&(!(s.expire&&(new Date).valueOf()>s.expire)&&s.data)}var i={data:e};if(r){var n=new Date;n=(new Date).valueOf()+r,i.expire=n}localStorage.setItem(t,JSON.stringify(i))}},t.configuration={config:{},configure:function(){if(arguments.length){this.config||(this.config={});for(var t=0;t<arguments.length;t++)"object"==typeof arguments[t]&&Object.assign(this.config,arguments[t]);var e=new CustomEvent("configure");this.dispatchEvent(e)}}},t.app={ready:function(){var t=new CustomEvent("ready");this.dispatchEvent(t)}},t.appElement=t.customElement(HTMLElement,"zs-app","div",[t.configuration,t.state,t.service,t.app]),t}(window.zs||{});
//# sourceMappingURL=zsApp.min.js.map