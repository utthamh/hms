# Store

We often want to store data between sessions or just cache it.

```javascript
import Store from "./service/store.m.js";
```

```javascript
let myStore = new Store();

myStore.setItem('test', 1);
console.log(myStore.getItem('test')); // 1
```

## Store values for a limited time.

It is handy to set expiration time for values we store.

```javascript
myStore.setItem('test', 1, 1); // Store for 1 second
console.log(myStore.getItem('test', true)); // 1
setTimeout(function() {
	console.log(myStore.getItem('test', true)); // null
}, 1100); // wait for 1+ seconds
```

## Removing values from a store

```javascript
myStore.setItem('test', 1);
myStore.removeItem('test');
console.log(myStore.getItem('test')); // undefined
```

## Store vs Service

Both Store and Service classes are designed to work with data but Service is based on a Promise and suggests to manipulate  data asynchronously. Services are better for REST APIs and HTTP requests. 

You can wrap a store as a service.

```javascript
import Service from "./service/service.m.js";
import Store from "./service/store.m.js";

var myStore = new Store();

// Service to access a storage
var myStoreService = new Service((params,resolve, reject) => {
	if (params.method == 'GET') {
		resolve(myStore.getItem(params.key));
	} else if (params.method == 'PUT') {
		resolve(myStore.setItem(params.key, params.value));
	}

});

// Save, load and display data
myStoreService.put({key: 'test', value: 1}).then(() => {
	myStoreService.get({key: 'test'}).then((data) => {
		console.log(data);
	});
});
```

## ES5 syntax

If you want to use it in older browsers like IE11.

```HTML
<script src="service/store.js"></script>
<script>
	var Store = window.storeM.default;
</script>
```

# Demo

-   [Store example](https://ui.zsservices.com/zsui/store.html)
-   [Ultimate data table example](https://ui.zsservices.com/zsui/urlimateDataTable.html)

# API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

## Store

Store data in memory in a hash table key -> value form.

### Examples

```javascript
var store = new Store();
```

### getItem

Load an item from the store

#### Parameters

-   `key` **[string][1]** Item key
-   `checkExpiration`  

#### Examples

```javascript
myStore.getItem('test');
```

Returns **[object][2]** Item value. Undefined when not found. Null when expired.

### setItem

Save an item to the store

#### Parameters

-   `key` **[string][1]** Item key
-   `value` **[object][2]** Item value
-   `expireInSeconds`  

#### Examples

```javascript
myStore.setItem('test', 1);
```

### removeItem

Remove item from the store

#### Parameters

-   `key` **[string][1]** Item key

#### Examples

```javascript
myStore.removeItem('test');
```

### expireKey

Generate a special key to store an expiration date

#### Parameters

-   `forItemByKey` **[string][1]** Key of the item

### setExpiration

Store expiration data for an item

#### Parameters

-   `forItemByKey` **[string][1]** Key of the item
-   `inSeconds` **[number][3]** In how many seconds item expires?

### deleteExpiration

Remove a special entry with expiration date from the store

#### Parameters

-   `forItemByKey` **[string][1]** Key of the item

### isExpired

Check if item has expired

#### Parameters

-   `key` **[string][1]** Item key

### isReady

Check if storage is ready

[1]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[2]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[3]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number
