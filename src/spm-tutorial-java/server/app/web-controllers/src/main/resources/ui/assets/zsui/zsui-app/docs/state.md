# State

States of our components can be driven through URL. Browser provide us a powerful router we can use through [location](https://developer.mozilla.org/en-US/docs/Web/API/Location) and [history](https://developer.mozilla.org/en-US/docs/Web/API/History) APIs.

## StateManager

Helps keeping `URL` and `State` in sync and emits `statechange` event.

```Javascript
var stateManager = new StateManager(window.location.href);
```

## State

An object that holds a state of the app or component. You can subscribe to the `statechange` event to get an instance of `State` object.

```Javascript
window.addEventListener('statechange', function(event) {
	// we have a new State instance
	var state = event.detail.newState;

	// we can detect changes 
	var diff = event.detail.diff;
});
```

# Demo

-   [State example](https://ui.zsservices.com/zsui/state.html)
-   [Demo app](https://ui.zsservices.com/app/index.html?selectedAlert=1&chat=true) is using state management. So we could link to a particular state using URL.

# API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

## State

**Extends URLSearchParams**

Class to create and store states of components or apps based on [URLSearchParams][1]

### Parameters

-   `init` **USVString?** A USVString instance, a URLSearchParams instance, a sequence of USVStrings, or a record containing USVStrings. Note that using a URLSearchParams instance is deprecated; soon browsers will just use a USVString for the init.

### Examples

```javascript
var myState = new State({test:1});
```

## diff

Difference from another State instance

### Parameters

-   `newStateObject` **[State][2]** Another State instance to compare with

### Examples

```javascript
var myState = new State({test:1}); myState.diff(new State({test:2})); // {"editedKeys":["test"],"deletedKeys":[],"newKeys":[],"changedKeys":["test"]}
```

Returns **[Object][3]** Detected changes presented as an object like `{editedKeys: [], deletedKeys: [], newKeys: [], changedKeys: []}`

## isEqual

Checks if the state objects is identical to another one

### Parameters

-   `toAnotherState` **[State][2]** Another state object to compare with

## toPlainObject

Converts the state object to JSON object

Returns **[object][3]** Plain JSON object

## update

Update the state with a plain JSON object

### Parameters

-   `stringOrJsonOrState` **[object][3]** 

## StateManager

### Parameters

-   `urlStringOrStateObject` **([object][3] \| [State][2] | URLSearchParams | [string][4])** We can initialize our state manager with a State object or a string.

### Examples

```javascript
var stateManager = new StateManager(window.location.href);
```

### url

Store current URL object

Type: [object][3]

#### Parameters

-   `newURLObject`  

### state

State

Type: [State][2]

#### Parameters

-   `newObject`  

### update

Update our state with a plain JSON object

#### Parameters

-   `stringOrJsonOrState` **[object][3]** 

### stateToUrl

Default way to reflect State in URL

#### Parameters

-   `newStateObject` **[State][2]** 

### urlToState

Default way to reflect URL in State

#### Parameters

-   `url` **[URL][5]** URL object

### onstatechange

Handle change of state

#### Parameters

-   `dontPush`  
-   `newObject` **[object][3]** Object with changes in the state to apply
-   `boolean` **dontPush** Skip pushing the state and change the URL. You might need this initially.

### cleanUp

Remove all event listeners

[1]: https://developer.mozilla.org/en-US/docs/Web/API/

[2]: #state

[3]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[4]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[5]: https://developer.mozilla.org/docs/Web/API/URL/URL
