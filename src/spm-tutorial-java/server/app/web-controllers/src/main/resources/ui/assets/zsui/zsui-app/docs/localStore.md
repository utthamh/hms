# Local Store

We often want to store data between sessions or just cache it. Unlike regular Store we can use [Storage API](https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API) to save data between browser sessions. 

```javascript
import LocalStore from "./service/LocalStore.m.js";
```

```javascript
let myStore = new LocalStore();
myStore.setItem('test', 1);
console.log(myStore.getItem('test')); // 1
```

## Store values for a limited time.

Sometimes we want to store values for some time.

```javascript
myStore.setItem('test', 1, 1); // Store for 1 second
console.log(myStore.getItem('test', true)); // 1
setTimeout(function() {
	console.log(myStore.getItem('test', true)); // null
}, 1100); // wait for 1+ seconds
```

## Why can't we use localStorage directly?

You absolutely can! But this tiny class wraps the Web Storage API to comply with Store protocol. This way working with any type of storage becomes predictable. It also adds handy features to handle expiration and encryption.

## ES5 syntax

If you want to use it in older browsers like IE11.

```HTML
<script src="service/localStore.js"></script>
<script>
	var Store = window.localStoreM.default;
</script>
```

# Demo

-   [Store example](https://ui.zsservices.com/zsui/store.html)
-   [Ultimate data table example](https://ui.zsservices.com/zsui/urlimateDataTable.html)

# API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

## LocalStore

**Extends Store**

Store data in localStorage.

### Examples

```javascript
var store = new LocalStore();
```

### getItem

Load an item from the store

#### Parameters

-   `key` **[string][1]** Item key
-   `checkExpiration`  

#### Examples

```javascript
myStore.getItem('test');
```

Returns **[object][2]** Item value. Null when not found. Null when expired.

### encrypt

Default encryption method. Used before we save an item to the store.

#### Parameters

-   `value` **[object][2]** 

Returns **[object][2]** Encrypted value

### decrypt

Default decryption method. Used after we load an item from the store.

#### Parameters

-   `value` **[object][2]** Encrypted value

Returns **[object][2]** Decrypted value

### setItem

Save an item to the store

#### Parameters

-   `key` **[string][1]** Item key
-   `value` **[object][2]** Item value
-   `expireInSeconds`  

#### Examples

```javascript
myStore.setItem('test', 1);
```

### removeItem

Remove item from the store

#### Parameters

-   `key` **[string][1]** Item key

#### Examples

```javascript
myStore.removeItem('test');
```

### isReady

Check if storage is available

## Store

Store data in memory in a hash table key -> value form.

### Examples

```javascript
var store = new Store();
```

### getItem

Load an item from the store

#### Parameters

-   `key` **[string][1]** Item key
-   `checkExpiration`  

#### Examples

```javascript
myStore.getItem('test');
```

Returns **[object][2]** Item value. Undefined when not found. Null when expired.

### setItem

Save an item to the store

#### Parameters

-   `key` **[string][1]** Item key
-   `value` **[object][2]** Item value
-   `expireInSeconds`  

#### Examples

```javascript
myStore.setItem('test', 1);
```

### removeItem

Remove item from the store

#### Parameters

-   `key` **[string][1]** Item key

#### Examples

```javascript
myStore.removeItem('test');
```

### expireKey

Generate a special key to store an expiration date

#### Parameters

-   `forItemByKey` **[string][1]** Key of the item

### setExpiration

Store expiration data for an item

#### Parameters

-   `forItemByKey` **[string][1]** Key of the item
-   `inSeconds` **[number][3]** In how many seconds item expires?

### deleteExpiration

Remove a special entry with expiration date from the store

#### Parameters

-   `forItemByKey` **[string][1]** Key of the item

### isExpired

Check if item has expired

#### Parameters

-   `key` **[string][1]** Item key

### isReady

Check if storage is ready

[1]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[2]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[3]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number
