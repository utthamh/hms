# Handling events in a smart way

We could handle events sever different ways. 

## Using built-in event handlers

```javascript
var button = document.createElement('button');
button.innerText = 'Click me';
button.classList.add('zs-button');
button.onclick = function() {
	this.innerText = 'Clicked';
}
document.body.appendChild(button);
```

## Handling events declaratively

```html
<button class="zs-button" onclick="this.innerText = 'Clicked'">Click me</button>
```

## Using event listeners

```javascript
var button2 = document.createElement('button');
button2.innerText = 'Click me';
button2.classList.add('zs-button');
button2.addEventListener('click', function (event) {
	this.innerText = 'Clicked';
});
document.body.appendChild(button2);
```

## By delegating

```javascript
var someObj = {
	handleEvent: function(event) {				
		event.target.innerText = 'Clicked';
	}
}
var button3 = document.createElement('button');
button3.innerText = 'Click me';
button3.classList.add('zs-button');
button3.addEventListener('click', someObj);
document.body.appendChild(button3);
```

## We can use the benefits of delegating events in our components

Our `events` module for components has several re-usable patterns to help with events

We can create a custom element

```js
import {on, eventHandler, fire, off} from '../src/smart/events.m.js';
import {mix} from '../src/smart/mixin.m.js';

class MyButton extends HTMLButtonElement {
	onclick(event) {
		this.innerText = 'Clicked';
		this.classList.toggle('zs-button-action');
	}
	connectedCallback() {		
		this.on('click', this);
	}
}
```

And extend it with patterns like `eventHandler`, `on`, `off`, `fire`.  

    mix(MyButton.prototype, {eventHandler, on, fire, off});

Let's register it and add to the DOM.

```js
customElements.define('my-button', MyButton, {extends: 'button'});
let button = document.createElement('button', {is: 'my-button'});
button.classList.add('zs-button');
button.innerText = 'Click me';
document.body.appendChild(button);
```

Now we can easily handle events using methods like `onclick`, `onsomeevent` and subscribe to several events.

```js
button.onmyevent = (event) => {
	console.log('my event', event);
};
button.on('myevent', button);
```

We could easily fire a custom event.

```js
button.fire('myevent', {details: {param1: 1}});
```

We could easily subscribe or unsubscribe and handle events for other elements or objects.

```js
button.onstatechange = (event) => {
	console.log('statechange', event);	
}
button.on('statechange', button, window); // subscribe to a window event
window.dispatchEvent(new CustomEvent('statechange', {detail: {newState: 1}})); 
button.off('statechange', button, window); // unsubscribe
window.dispatchEvent(new CustomEvent('statechange', {detail: {newState: 1}}));
```

# API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

## preventEvent

### Parameters

-   `e`  

**Meta**

-   **copyright**: : Copyright (c) 2018 ZS Associates; 2018 Andrea Giammarchi, @WebReflection under ISC

-   **author**: : Mikhail Vazhenin @ZS, Andrea Giammarchi @WebReflection

## preventEvent

Block an event. Use it as an event handler for addEventListener method or inside "events" object.

### Parameters

-   `e` **[object][1]** Event to block.

## handleEvent

Handle an event for an object via handleEvent DOM API [https://developer.mozilla.org/en-US/docs/Web/API/EventListener/handleEvent][2]. 
Borrowed this idea from Andrea Giammarchi [https://medium.com/@WebReflection/dom-handleevent-a-cross-platform-standard-since-year-2000-5bf17287fd38)][3]

### Parameters

-   `event` **[Event][4]** event to handle

## on

-   **See: handleEvent**

Subscribe to events from another HTMLElement using handleEvent API.

### Parameters

-   `events`  
-   `toObject` **([HTMLElement][5]? | [object][1])** Event handler with `handleEvent` method.
-   `fromObject` **([HTMLElement][5]? | [object][1])** Event emitter.
-   `unsubscribe` **[boolean][6]?** Optional flag to unsubscribe
-   `passive` **[boolean][6]?** Optional flag to create a passive event listeners
-   `Events` **([array][7] \| [string][8])** Event name or an array of event names.

## off

-   **See: handleEvent**
-   **See: on**

Unsubscribe from events emitted by another HTMLElement via handleEvent API.

### Parameters

-   `events`  
-   `toObject`  
-   `fromObject`  

## fire

Shortcut to dispatch a custom or native event

### Parameters

-   `event` **([string][8] \| [object][1])** Event name or an event instance
-   `params` **[object][1]?** Optional parameters {bubbles: true, detail: {...}}
-   `target` **[HTMLElement][5]?** Optional target of the event

Returns **[CustomEvent][9]?** New custom event

[1]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[2]: https://developer.mozilla.org/en-US/docs/Web/API/EventListener/handleEvent

[3]: <https://medium.com/@WebReflection/dom-handleevent-a-cross-platform-standard-since-year-2000-5bf17287fd38)>

[4]: https://developer.mozilla.org/docs/Web/API/Event

[5]: https://developer.mozilla.org/docs/Web/HTML/Element

[6]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean

[7]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array

[8]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[9]: https://developer.mozilla.org/docs/Web/API/CustomEvent/CustomEvent
